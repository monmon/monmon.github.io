desc 'git を masterに変える';
task checkout_master => sub {
    my ($task, @args) = @_;
    sh qw(git checkout master);
};

desc 'master に記事があるので master で作業するように setup';
task setup => 'checkout_master';

desc '記事を作る';
task publish => sub {
    my ($task, @args) = @_;
    sh qw(carton exec riji publish);
};

desc '作られた記事を github に push';
task push_github => sub {
    my ($task, @args) = @_;

    sh qw(git add -A);
    my $commit_message = 'Update blog on Travis';
    sh qw(git commit -m $commit_message);
    # Token が出力されないように --quite しつつ、 2> /dev/null
    sh qw(git push --quiet https://$GH_TOKEN@github.com/monmon/monmon.github.io master 2> /dev/null');
};
